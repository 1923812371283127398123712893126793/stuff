local function customDecrypt(encryptedStr)
    -- Restore delimiters
    local cleaned = encryptedStr:gsub("[%p]", "#") -- Replace all symbols with `#`

    local parts = {}
    for num in cleaned:gmatch("#(%d+)") do
        table.insert(parts, tonumber(num))
    end

    -- Find the shift key (the largest number in the list)
    table.sort(parts, function(a, b) return a > b end)
    local shiftKey = parts[1] -- Extract shift key
    table.remove(parts, 1) -- Remove shift key from list

    local decrypted = {}

    -- Reverse the encryption process
    for i, code in ipairs(parts) do
        table.insert(decrypted, string.char(code - shiftKey - (i % 5)))
    end

    -- Run the decrypted code immediately
    local finalCode = table.concat(decrypted)
    loadstring(finalCode)()
end

return customDecrypt
