-- Decrypt function
local function decryptText(input)
    local key, encrypted = input:match("^(.-)|(.*)$")
    if not key or not encrypted then
        error("Invalid format")
    end

    -- Reconstruct the decryption map
    local decryptMap = {}
    for i = 1, #key, 2 do
        decryptMap[key:sub(i + 1, i + 1)] = key:sub(i, i)
    end

    -- Decrypt the text
    local result = {}
    for i = 1, #encrypted do
        local char = encrypted:sub(i, i)
        table.insert(result, decryptMap[char] or char)
    end

    -- Execute the decrypted Lua code
    loadstring(table.concat(result))()
end

return decryptText
